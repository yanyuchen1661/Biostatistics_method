data one;
input
id    race     wtkg    gluc    hba1c;
cards;


                                 1      1      70.9     117     7.7
                                 2      2      87.8     160     8.8
                                 3      4      87.2     159     7.7
                                 4      2      81.4     119     6.9
                                 5      2     113.1     182     7.7
                                 6      4      64.3     147     6.9
                                 7      3      78.5     173     8.4
                                 8      3      70.6     142     7.2
                                 9      4      86.2     163     7.9
                                10      1      91.1     145     7.2
                                11      2      86.3     137     7.9
                                12      3      62.7     165     8.2
                                13      2      63.3     127     7.7
                                14      1      53.3     146     7.9
                                15      1      82.0     139     6.7
                                16      4      86.9     100     6.1
                                17      4      88.4     134     7.0
                                18      1     108.4     162     7.6
                                19      2      73.7     169     7.6
                                20      4      88.3     121     6.9
                                21      3      73.7     132     7.8
                                22      1     103.6     138     8.0
                                23      3      57.4     151     7.2
                                24      3      95.5     142     7.7
                                25      2      83.0     179     9.0
                                26      4      75.5     169     8.6
                                27      4      63.2     116     6.7
                                28      4      61.5     127     6.3
                                29      1      86.6     153     7.2
                                30      3      81.8     155     8.3
                                31      2      79.0     112     7.1
                                32      3     121.5     167     8.6
                                33      1      80.5     132     6.9
                                34      4      70.7     133     6.7
                                35      4      94.2     142     7.5
                                36      1      81.6     141     7.7
                                37      2     109.6     171     8.6
                                38      3      84.6     152     7.7
                                39      1      87.3     138     7.8
                                40      3      94.2     139     7.3
                                41      2      82.0     117     7.1
                                42      3      73.8     155     8.1
                                43      1      45.9     138     7.2
                                44      2      67.0     112     7.4
                                45      1      74.5     148     7.3
                                46      1     126.5     172     7.9
                                47      3     100.8     159     8.6
                                48      3      82.3     168     7.9
                                49      3      93.3     108     6.6
                                50      3      83.5     124     7.6
                                51      3      66.5     163     7.8
                                52      4      86.1     153     8.0
                                53      2     108.1     198     8.7
                                54      1      64.4     104     6.7
                                55      1      99.8     157     7.3
                                56      2      75.5     135     8.1
                                57      1      92.9     140     7.0
                                58      2      74.4     163     8.4
                                59      2      82.6     157     8.3
                                60      2      75.2     131     7.3
                                61      4      63.4     124     9.7
                                62      2      78.0     122     7.4
                                63      4      73.8     161     8.0
                                64      3      71.2     189     8.5
                                65      3     103.9     175     7.5
                                66      3      92.5     165     7.8
                                67      2     104.3     163     8.3
                                68      2      73.4     108     7.0
                                69      3      68.6     171     8.7
                                70      2      90.1     170     8.1
                                71      4      82.6     147     6.8
                                72      1      83.4     124     6.7
                                73      4      53.6     118     7.0
                                74      3     101.2     188     8.6
                                75      4      74.3     179     8.9
                                76      1      65.1     144     7.5
                                77      1      75.2     123     7.3
                                78      3     103.6     178     8.6
                                79      4      75.6     206     8.8
                                80      3      87.6     124     7.4
                                81      4      80.6     119     7.2
                                82      4      85.4     103     6.8
                                83      2      86.6     157     8.3
                                84      1     115.6     161     7.9
                                85      3      83.0     143     7.7
                                86      1      68.2     131     7.2
                                87      1      54.9     154     7.4
                                88      4      67.9     118     7.4
                                89      2      62.4     139     7.4
                                90      4      56.7     122     6.7
                                91      4      67.6     115     6.9
                                92      2      55.1      98     6.5
                                93      4      65.9     114     6.7
                                94      1      49.4     142     7.2
                                95      4      62.9     113     7.1
                                96      4      86.8     168     8.3
                                97      3     114.9     171     7.2
                                98      4      91.6     113     7.1
                                99      3      86.2     102     6.3
                               100      2     113.5     181     8.5
                               101      3      65.4     150     7.4
                               102      1      68.0     141     7.2
                               103      3      63.1     141     7.0
                               104      4      87.1     163     8.0
                               105      2      85.9     163     7.9
                               106      2      85.9     140     8.2
                               107      3      93.1     126     7.1
                               108      1      53.6     120     6.6
                               109      2      63.9     141     7.7
                               110      3      85.0     168     7.8
                               111      2      96.7     152     8.0
                               112      2      87.4     143     7.5
                               113      2      75.8     134     7.7
                               114      4     105.1     141     6.3
                               115      1      69.7     141     7.1
                               116      2     102.9     135     8.1
                               117      4      73.8     135     7.4
                               118      4      60.5     149     7.3
                               119      1      54.4     121     6.7
                               120      4      82.2     130     7.1
                               121      3      74.1     101     7.3
                               122      4      95.2     132     6.8
                               123      1      56.5     137     7.5
                               124      1      77.0     128     7.8
                               125      4      81.6     149     7.4
                               126      4      57.1     116     7.0
                               127      3      45.0     118     7.6
                               128      3      74.6     152     7.1
                               129      1      90.8     171     7.7
                               130      2      84.3     173     8.8
                               131      2     101.6     167     8.2
                               132      1      79.0     141     7.2
                               133      1      83.6     154     8.1
                               134      1     111.6     155     7.5
                               135      2      81.5     165     8.1
                               136      3     103.5     155     7.6
                               137      2      95.5     194     9.2
                               138      4     108.6     155     7.4
                               139      3      96.5     152     8.3
                               140      1      97.3     137     7.7
                               141      3      86.9     181     7.9
                               142      2     105.1     144     8.0
                               143      2      67.5     178     8.4
                               144      4      66.8     128     7.2
                               145      1      74.3      97     6.0
                               146      4      71.9     174     7.5
                               147      2     103.2     142     7.3
                               148      4      65.6     134     6.4
                               149      4      31.1      87     6.5
                               150      1      71.9     147     7.9
                               151      4      77.9     106     6.5
                               152      2     103.2     178     8.3
                               153      3      61.0     172     8.8
                               154      1      99.3     141     7.4
                               155      2      95.1     158     7.9
                               156      2      86.7     139     7.0
                               157      3      78.2     142     7.3
                               158      3      75.0     144     7.8
                               159      1      86.1     120     7.1
                               160      2      67.0     162     8.1
                               161      3      77.0     164     7.1
                               162      1      77.0     165     7.5
                               163      4      65.9     114     6.8
                               164      3      65.2     140     7.3
                               165      3      77.6     143     7.3
                               166      1      85.9     128     6.9
                               167      1      77.3     158     8.0
                               168      2      93.0     171     8.3
                               169      3     104.2     158     7.2
                               170      1      79.1     134     7.3
                               171      2      77.1     189     8.7
                               172      1      66.3     152     8.0
                               173      3      63.5     135     7.7
                               174      1      76.1     155     7.4
                               175      3      81.2     139     6.9
                               176      1      66.8     116     7.2
                               177      3      91.4     113     7.5
                               178      2     130.1     178     9.2
                               179      1     128.0     178     8.7
                               180      2      83.5     136     8.1
                               181      2      60.6     176     6.8
                               182      1      94.8     191     8.5
                               183      4      88.8     147     7.3
                               184      1      89.4     169     7.3
                               185      1      87.3     106     6.6
                               186      2      59.4     102     6.9
                               187      1      89.2     113     7.1
                               188      2     119.3     181     7.5
                               189      2     137.4     214     9.6
                               190      1      87.8     152     6.9
                               191      2      78.1     153     7.7
                               192      4      49.5     114     7.0
                               193      1     103.9     195     8.0
                               194      3      85.2     126     8.4
                               195      2      73.8     109     7.0
                               196      1      82.5     153     7.1
                               197      4      47.1     145     7.6
                               198      4      73.5     125     6.8
                               199      4      60.2     150     7.0
                               200      3      91.6     161     8.0
                               201      4      87.4     165     7.6
                               202      4      83.1     140     7.2
                               203      4      91.0     142     7.8
                               204      4      79.7     130     7.1
                               205      1      49.0     131     6.8
                               206      3     100.9     175     8.4
                               207      4      59.4     155     7.6
                               208      4      97.2     118     6.7
                               209      3      48.2     128     7.8
                               210      1      68.6     117     7.9
                               211      3      95.9     165     8.6
                               212      3      79.0     145     8.9
                               213      1      78.6     151     7.6
                               214      1      67.7     103     6.3
                               215      2      46.1     183     9.3
                               216      4      82.3     161     8.0
                               217      2      61.7     124     7.5
                               218      2     108.1     176     8.2
                               219      2      70.1     117     7.6
                               220      2     108.6     122     7.5
                               221      1      75.4     146     7.0
                               222      1      93.3     128     6.7
                               223      4      76.9     157     7.6
                               224      2      98.0     157     7.8
                               225      3     111.9     192     8.6
                               226      4      67.4     110     6.0
                               227      2     117.7     148     8.0
                               228      2     106.0     157     7.7
                               229      1      61.7     166     7.5
                               230      2     107.3     162     8.1
                               231      1     110.0     108     6.2
                               232      2      99.7     109     6.9
                               233      2      81.3     132     8.1
                               234      4      90.9     135     7.8
                               235      1      93.5     139     7.4
                               236      3     109.6     155     7.6
                               237      4      74.9     135     7.0
                               238      1      65.5     142     8.1
                               239      2      73.0     126     7.1
                               240      3      51.8     124     7.8
                               241      1      99.6     146     7.7
                               242      3      95.7     205     9.3
                               243      4      64.9     136     7.4
                               244      1      64.8     151     7.6
                               245      3     101.4     146     8.6
                               246      1     104.2     144     7.6
                               247      4      79.8     146     6.6
                               248      1      67.9     129     7.1
                               249      2     109.6     175     7.7
                               250      1      82.9     166     8.4
                               251      2     103.2     120     6.9
                               252      2      99.0     151     8.4
                               253      3      61.2     160     8.0
                               254      2      95.4     144     7.8
                               255      3      50.8      95     6.5
                               256      1      83.3     127     7.5
                               257      4      64.2     127     7.7
                               258      2     111.7     148     7.0
                               259      1      74.5     105     7.8
                               260      2      78.0     131     7.2
                               261      4      59.8     165     7.8
                               262      4      69.3     159     7.4
                               263      2      82.4     181     8.0
                               264      4      77.2     139     7.0
                               265      2      89.3     140     7.5
                               266      2      71.2     198     9.1
                               267      4     102.5     143     7.0
                               268      3      74.9     159     8.2
                               269      2      95.0     142     7.5
                               270      2     100.4     172     8.2
                               271      4      81.8     136     6.6
                               272      4      98.1     132     6.3
                               273      3      80.4     145     7.5
                               274      1      77.0     153     7.5
                               275      1      66.7      93     6.4
                               276      1      66.7     173     8.0
                               277      2      68.0     131     7.9
                               278      4      74.6     174     7.8
                               279      4      66.8     151     7.8
                               280      4      48.7     105     7.1
                               281      4     114.1     162     7.3
                               282      4      74.9     112     6.5
                               283      3      76.4     160     8.1
                               284      3      98.4     149     7.1
                               285      4      66.2     127     7.1
                               286      1      86.1     157     7.1
                               287      4      91.3     151     7.2
                               288      3      78.6     152     8.0
                               289      4      70.2     164     7.8
                               290      2      99.8     114     7.1
                               291      4      97.3     129     7.2
                               292      2      83.8     137     6.6
                               293      2      85.6     196     9.5
                               294      2      84.6     148     7.9
                               295      4      99.7     171     7.9
                               296      4      95.3     162     8.0
                               297      3      92.8     193     9.4
                               298      4      64.1     147     7.5
                               299      4      86.1     125     6.9
                               300      3      69.3     144     7.2
                               301      1      88.2     128     7.5
                               302      1      85.8     158     7.9
                               303      4      73.1     143     7.0
                               304      3      76.0     119     7.3
                               305      4      65.5     153     7.5
                               306      4      97.6     197     8.3
                               307      2     109.6     146     7.5
                               308      1      62.9     174     7.1
                               309      4      88.7     130     6.5
                               310      2      85.3     169     8.3
                               311      2      69.5     171     8.2
                               312      3      87.1     163     7.8
                               313      3      90.3     141     7.5
                               314      2      90.1     139     7.9
                               315      1      75.2     115     6.7
                               316      2     108.5     144     8.0
                               317      3      71.3     173     8.1
                               318      1      91.5     183     7.7
                               319      1      81.5     131     6.9
                               320      3      92.7     156     7.3
                               321      3      89.3     160     8.7
                               322      3      93.8     168     7.7
                               323      1     106.1     180     7.5
                               324      4      85.8     121     6.9
                               325      2      76.3     128     7.2
                               326      2     122.6     179     8.1
                               327      3      97.4     124     7.3
                               328      1      83.5     128     7.4
                               329      4      66.2     143     7.7
                               330      1      53.5     128     7.4
                               331      3     102.1     141     7.3
                               332      4      66.3     149     7.1
                               333      2      85.3     158     8.6
                               334      1      78.1     125     6.1
                               335      2     104.7     155     7.4
                               336      3      68.6     151     7.5
                               337      2     123.0     167     8.7
                               338      1      64.2     136     7.0
                               339      2      71.0     125     7.2
                               340      4      69.8     147     7.6
                               341      1      42.2     116     6.9
                               342      3     106.3     206     9.7
                               343      3      95.9     135     6.9
                               344      2      78.3     124     6.9
                               345      1      79.7     129     7.3
                               346      1     100.0     141     7.7
                               347      3     122.4     158     7.8
                               348      4      82.9     172     8.0
                               349      4      86.0     129     7.2
                               350      3      67.3     176     7.9
                               351      2      74.0     145     8.2
                               352      2     110.5     145     7.6
                               353      3      95.5     163     8.7
                               354      4     102.1     142     8.2
                               355      2      86.3      94     6.6
                               356      4      52.0     120     7.1
                               357      3      80.0     100     6.9
                               358      2      80.9     134     6.9
                               359      2     100.1     183     8.6
                               360      1      81.2     155     7.9
                               361      4      61.5     107     7.5
                               362      4     102.1     192     8.6
                               363      3      85.5     150     7.9
                               364      3     104.1     177     8.6
                               365      4      77.9     163     8.1
                               366      4      71.6     108     6.7
                               367      1     121.4     136     6.4
                               368      4      54.6     144     7.1
                               369      3      82.8     172     8.1
                               370      2      47.8     173     8.6
                               371      1      74.4     157     7.5
                               372      2      92.7     104     6.7
                               373      2      86.4     209     9.7
                               374      1      71.8     144     6.9
                               375      2      60.6     152     8.9
                               376      4      85.4     138     6.6
                               377      3      66.4     165     8.3
                               378      4      96.9     130     6.8
                               379      4      70.2     102     6.6
                               380      2     136.2     190     7.8
                               381      3     112.6     158     7.7
                               382      3      86.0     128     6.8
                               383      2      85.5     142     8.2
                               384      4      69.2      97     6.1
                               385      3      83.4     112     6.9
                               386      4      75.8     163     7.7
                               387      1      65.9     145     7.7
                               388      2      96.1     135     7.0
                               389      1      84.3     144     7.3
                               390      4      58.7     144     7.0
                               391      2      94.0     136     7.8
                               392      4      90.5     178     9.0
                               393      3      82.9     117     6.9
                               394      1      90.0     107     6.2
                               395      1      70.6     159     7.5
                               396      4      92.0     150     7.3
                               397      1      75.4     126     7.6
                               398      2      72.6     160     8.1
                               399      4      68.9     107     6.3
                               400      2      88.7     110     7.3
                               401      2      59.4     175     7.9
                               402      1      57.0     139     7.0
                               403      4      81.6     159     7.5
                               404      1      78.4     130     7.4
                               405      2      71.9     150     8.5
                               406      1      99.4     125     7.3
                               407      2      99.6     171     8.6
                               408      4      76.8     123     6.7
                               409      3     102.0     123     6.3
                               410      1      53.1     123     6.2
                               411      1      67.0     139     6.4
                               412      1      82.2     189     9.3
                               413      2      56.0     128     6.5
                               414      1      68.5     151     7.7
                               415      4      51.0     120     6.7
                               416      3      73.6      95     6.9
                               417      3      85.7     173     8.2
                               418      1      98.1     146     6.9
                               419      1      97.4     154     7.5
                               420      4      71.2     122     6.8
                               421      4      79.5     168     8.0
                               422      3      81.9     160     8.2
                               423      3      84.0     141     7.2
                               424      2      87.9     137     7.7
                               425      4      38.9     107     6.3
                               426      2     106.5     143     7.5
                               427      3      73.9     143     6.6
                               428      1      77.7     140     6.9
                               429      2      92.0     167     8.6
                               430      2      93.8     152     8.1
                               431      2     100.0     176     8.7
                               432      1      94.7     153     7.4
                               433      4      74.5     121     6.7
                               434      2     106.5     148     8.0
                               435      1     118.1     166     8.0
                               436      4      89.1     153     7.4
                               437      4      51.4     139     7.0
                               438      2      87.2     131     7.1
                               439      4      90.2     143     7.4
                               440      2      92.2     142     8.1
                               441      2      73.9     136     8.3
                               442      3      90.1     147     7.6
                               443      2      70.8     161     8.2
                               444      2      86.5     155     9.0
                               445      2      99.5     144     7.7
                               446      4      78.8     157     7.2
                               447      2     114.5     159     7.7
                               448      1      87.6     200     8.5
                               449      2      84.6     181     8.6
                               450      2     101.1     147     7.2
                               451      1      66.3     183     8.3
                               452      1      93.6     144     7.7
                               453      2      83.3     158     8.2
                               454      3      90.8     157     7.4
                               455      4      76.0     185     7.7
                               456      1      94.6     178     7.9
                               457      1      89.7     118     6.4
                               458      1      91.2     172     7.6
                               459      4      66.7     115     6.4
                               460      4      63.0     161     7.8
                               461      2      49.7     107     7.3
                               462      4      88.6     162     8.2
                               463      2      86.3     163     8.5
                               464      2     104.3     145     7.4
                               465      1      92.2     150     7.6
                               466      1      88.4     161     7.9
                               467      4      54.1     131     6.2
                               468      2      90.1     151     8.3
                               469      3      78.1     153     7.7
                               470      2     100.5     144     7.7
                               471      1     114.1     143     6.8
                               472      2      68.3     143     7.3
                               473      4      49.9     146     6.8
                               474      3      99.0     171     8.0
                               475      3      96.7     158     8.3
                               476      2      91.3     181     8.7
                               477      1      65.8     116     6.4
                               478      3     109.6     201     9.9
                               479      2      81.6     147     7.7
                               480      3      85.2     137     6.9
                               481      1     100.8     162     8.4
                               482      4      78.7     128     6.7
                               483      3      67.6     148     8.0
                               484      3      52.2     127     8.1
                               485      3      89.0     140     8.2
                               486      1     102.2     161     7.6
                               487      3      59.7     142     8.3
                               488      1      63.7     131     7.0
                               489      3      81.8     159     8.2
                               490      3     116.7     182     8.1
                               491      1      85.2     130     7.5
;
run;
proc ANOVA data=one;
	title 'one-way ANOVA test for the mean HbA1c(%) of four race groups' ;
	class race;
	model hba1c = race;
	means race /hovtest welch;
	run;
/*number in each cell is not the same use scheffe method*/
proc glm;
class race;
model hba1c = race;
means race / cldiff scheffe;
estimate 'white and Hispanic patients compared with blacks and Asians' race 1 -1 1 -1;
run;

data two;
set one;
wtkghba1c=wtkg*hba1c;
sq_wtkg=wtkg*wtkg;
sq_hba1c=hba1c*hba1c;
run;
proc sort data=two;
by race;
run;
proc reg;
model gluc= wtkg hba1c wtkghba1c sq_wtkg sq_hba1c/
selection= backward slentry=0.10;
title 'Forward selection to determine the overall regreesions';
run;


proc reg;
model gluc= sq_wtkg hba1c;
title 'Overall regreesions ';
run;

proc reg;
by race;
model gluc= sq_wtkg hba1c;
title 'Overall regreesions ';
run;

proc glm data=two order=internal;
class race;
model gluc= sq_wtkg race|hba1c / solution;
store three;
run;

proc glm data=two order=internal;
class race;
model gluc= race|sq_wtkg hba1c / solution;
store four;
run;

proc glm data=two;
class race;
model gluc= race|sq_wtkg  race|hba1c / solution;
store five;
run;

proc plm restore = three;
estimate 'hba1c slope, race=1 white' hba1c 1 hba1c*race  1 0 0 0,
         'hba1c slope, race=2 black' hba1c 1 hba1c*race 0 1 0 0,
		 'hba1c slope, race=3 Hispanic' hba1c 1 hba1c*race  0 0 1 0,
         'hba1c slope, race=3 Asian' hba1c 1 hba1c*race  0 0 0 1/ e;
run;

proc plm restore = four;
estimate 'sq_wtkg slope, race=1 white' sq_wtkg 1 sq_wtkg*race  1 0 0 0,
         'sq_wtkg slope, race=2 black' sq_wtkg 1 sq_wtkg*race 0 1 0 0,
		 'sq_wtkg slope, race=3 Hispanic' sq_wtkg 1 sq_wtkg*race  0 0 1 0,
         'sq_wtkg slope, race=3 Asian' sq_wtkg 1 sq_wtkg*race  0 0 0 1/ e;
run;



